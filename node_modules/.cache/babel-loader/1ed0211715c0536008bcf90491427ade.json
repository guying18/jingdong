{"remainingRequest":"C:\\Users\\aweffr\\Desktop\\jingdong\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\aweffr\\Desktop\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\aweffr\\Desktop\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\aweffr\\Desktop\\jingdong\\src\\views\\shop\\Content.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\aweffr\\Desktop\\jingdong\\src\\views\\shop\\Content.vue","mtime":1635499368063},{"path":"C:\\Users\\aweffr\\Desktop\\jingdong\\babel.config.js","mtime":1635140508807},{"path":"C:\\Users\\aweffr\\Desktop\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\aweffr\\Desktop\\jingdong\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\aweffr\\Desktop\\jingdong\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\aweffr\\Desktop\\jingdong\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1632349277000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2F3ZWZmci9EZXNrdG9wL2ppbmdkb25nL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyByZWYsIHJlYWN0aXZlLCB0b1JlZnMsIHdhdGNoRWZmZWN0IH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlUm91dGUgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IHsgZ2V0IH0gZnJvbSAnQC91dGlscy9yZXF1ZXN0LmpzJzsKaW1wb3J0IHsgdXNlQ29tbW9uQ2FydEVmZmVjdCB9IGZyb20gJ0Avdmlld3Mvc2hvcC9jb21tb25DYXJ0RWZmZWN0LmpzJzsKdmFyIGNhdGVnb3JpZXMgPSBbewogIG5hbWU6ICflhajpg6jllYblk4EnLAogIHRhYjogJ2FsbCcKfSwgewogIG5hbWU6ICfnp5LmnYAnLAogIHRhYjogJ3NlY2tpbGwnCn0sIHsKICBuYW1lOiAn5paw6bKc5rC05p6cJywKICB0YWI6ICdmcnVpdCcKfV07IC8vIFRhYiDliIfmjaLnm7jlhbPpgLvovpEKCnZhciB1c2VUYWJFZmZlY3QgPSBmdW5jdGlvbiB1c2VUYWJFZmZlY3QoKSB7CiAgdmFyIGN1cnJlbnRUYWIgPSByZWYoY2F0ZWdvcmllc1swXS50YWIpOwoKICB2YXIgaGFuZGxlVGFiQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVUYWJDbGljayh0YWIpIHsKICAgIGN1cnJlbnRUYWIudmFsdWUgPSB0YWI7CiAgfTsKCiAgcmV0dXJuIHsKICAgIGN1cnJlbnRUYWI6IGN1cnJlbnRUYWIsCiAgICBoYW5kbGVUYWJDbGljazogaGFuZGxlVGFiQ2xpY2sKICB9Owp9OyAvLyDojrflj5bliJfooajlhoXlrrnnm7jlhbPpgLvovpEKCgp2YXIgdXNlQ3VycmVudExpc3RFZmZlY3QgPSBmdW5jdGlvbiB1c2VDdXJyZW50TGlzdEVmZmVjdChjdXJyZW50VGFiLCBzaG9wSWQpIHsKICB2YXIgY29udGVudCA9IHJlYWN0aXZlKHsKICAgIGxpc3Q6IFtdCiAgfSk7CgogIHZhciBnZXRDb250ZW50RGF0YSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHJlc3VsdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBnZXQoIi9hcGkvc2hvcC8iLmNvbmNhdChzaG9wSWQsICIvcHJvZHVjdHMiKSwgewogICAgICAgICAgICAgICAgdGFiOiBjdXJyZW50VGFiLnZhbHVlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKHJlc3VsdC5lcnJubyA9PT0gMCAmJiByZXN1bHQuZGF0YS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGNvbnRlbnQubGlzdCA9IHJlc3VsdC5kYXRhOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGdldENvbnRlbnREYXRhKCkgewogICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHdhdGNoRWZmZWN0KGZ1bmN0aW9uICgpIHsKICAgIGdldENvbnRlbnREYXRhKCk7CiAgfSk7CgogIHZhciBfdG9SZWZzID0gdG9SZWZzKGNvbnRlbnQpLAogICAgICBsaXN0ID0gX3RvUmVmcy5saXN0OwoKICByZXR1cm4gewogICAgbGlzdDogbGlzdAogIH07Cn07CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2NvbnRlbnQnLAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciByb3V0ZSA9IHVzZVJvdXRlKCk7CiAgICB2YXIgc2hvcElkID0gcm91dGUucGFyYW1zLmlkOwoKICAgIHZhciBfdXNlVGFiRWZmZWN0ID0gdXNlVGFiRWZmZWN0KCksCiAgICAgICAgY3VycmVudFRhYiA9IF91c2VUYWJFZmZlY3QuY3VycmVudFRhYiwKICAgICAgICBoYW5kbGVUYWJDbGljayA9IF91c2VUYWJFZmZlY3QuaGFuZGxlVGFiQ2xpY2s7CgogICAgdmFyIF91c2VDdXJyZW50TGlzdEVmZmVjdCA9IHVzZUN1cnJlbnRMaXN0RWZmZWN0KGN1cnJlbnRUYWIsIHNob3BJZCksCiAgICAgICAgbGlzdCA9IF91c2VDdXJyZW50TGlzdEVmZmVjdC5saXN0OwoKICAgIHZhciBfdXNlQ29tbW9uQ2FydEVmZmVjdCA9IHVzZUNvbW1vbkNhcnRFZmZlY3QoKSwKICAgICAgICBjYXJ0TGlzdCA9IF91c2VDb21tb25DYXJ0RWZmZWN0LmNhcnRMaXN0LAogICAgICAgIGNoYW5nZUNhcnRJdGVtSW5mbyA9IF91c2VDb21tb25DYXJ0RWZmZWN0LmNoYW5nZUNhcnRJdGVtSW5mbzsKCiAgICByZXR1cm4gewogICAgICBjYXJ0TGlzdDogY2FydExpc3QsCiAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXMsCiAgICAgIGhhbmRsZVRhYkNsaWNrOiBoYW5kbGVUYWJDbGljaywKICAgICAgY3VycmVudFRhYjogY3VycmVudFRhYiwKICAgICAgbGlzdDogbGlzdCwKICAgICAgc2hvcElkOiBzaG9wSWQsCiAgICAgIGNoYW5nZUNhcnRJdGVtSW5mbzogY2hhbmdlQ2FydEl0ZW1JbmZvCiAgICB9OwogIH0KfTs="},{"version":3,"sources":["C:\\Users\\aweffr\\Desktop\\jingdong\\src\\views\\shop\\Content.vue"],"names":[],"mappings":";;AAoCA,SAAS,GAAT,EAAc,QAAd,EAAwB,MAAxB,EAAgC,WAAhC,QAAmD,KAAnD;AACA,SAAS,QAAT,QAAyB,YAAzB;AACA,SAAS,GAAT,QAAoB,oBAApB;AACA,SAAS,mBAAT,QAAoC,kCAApC;AAEA,IAAM,UAAS,GAAI,CACjB;AAAE,EAAA,IAAI,EAAE,MAAR;AAAgB,EAAA,GAAG,EAAE;AAArB,CADiB,EAEjB;AAAE,EAAA,IAAI,EAAE,IAAR;AAAc,EAAA,GAAG,EAAE;AAAnB,CAFiB,EAGjB;AAAE,EAAA,IAAI,EAAE,MAAR;AAAgB,EAAA,GAAG,EAAE;AAArB,CAHiB,CAAnB,C,CAKA;;AACA,IAAM,YAAW,GAAI,SAAf,YAAe,GAAM;AACzB,MAAM,UAAS,GAAI,GAAG,CAAC,UAAU,CAAC,CAAD,CAAV,CAAc,GAAf,CAAtB;;AACA,MAAM,cAAa,GAAI,SAAjB,cAAiB,CAAC,GAAD,EAAS;AAC9B,IAAA,UAAU,CAAC,KAAX,GAAmB,GAAnB;AACF,GAFA;;AAGA,SAAO;AAAE,IAAA,UAAU,EAAV,UAAF;AAAc,IAAA,cAAa,EAAb;AAAd,GAAP;AACF,CANA,C,CAQA;;;AACA,IAAM,oBAAmB,GAAI,SAAvB,oBAAuB,CAAC,UAAD,EAAa,MAAb,EAAwB;AACnD,MAAM,OAAM,GAAI,QAAQ,CAAC;AAAE,IAAA,IAAI,EAAE;AAAR,GAAD,CAAxB;;AACA,MAAM,cAAa;AAAA,uEAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACA,GAAG,qBAAc,MAAd,gBAAiC;AAAE,gBAAA,GAAG,EAAE,UAAU,CAAC;AAAlB,eAAjC,CADH;;AAAA;AACf,cAAA,MADe;;AAErB,kBAAI,MAAM,CAAC,KAAP,KAAiB,CAAjB,IAAsB,MAAM,CAAC,IAAP,CAAY,MAAtC,EAA8C;AAC5C,gBAAA,OAAO,CAAC,IAAR,GAAe,MAAM,CAAC,IAAtB;AACF;;AAJqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAJ;;AAAA,oBAAb,cAAa;AAAA;AAAA;AAAA,KAAnB;;AAMA,EAAA,WAAW,CAAC,YAAM;AAChB,IAAA,cAAc;AACf,GAFU,CAAX;;AAGA,gBAAiB,MAAM,CAAC,OAAD,CAAvB;AAAA,MAAQ,IAAR,WAAQ,IAAR;;AACA,SAAO;AAAE,IAAA,IAAG,EAAH;AAAF,GAAP;AACF,CAbA;;AAeA,eAAe;AACb,EAAA,IAAI,EAAE,SADO;AAEb,EAAA,KAFa,mBAEJ;AACP,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,MAAK,GAAI,KAAK,CAAC,MAAN,CAAa,EAA5B;;AACA,wBAAuC,YAAY,EAAnD;AAAA,QAAQ,UAAR,iBAAQ,UAAR;AAAA,QAAoB,cAApB,iBAAoB,cAApB;;AACA,gCAAiB,oBAAoB,CAAC,UAAD,EAAa,MAAb,CAArC;AAAA,QAAQ,IAAR,yBAAQ,IAAR;;AACA,+BAAyC,mBAAmB,EAA5D;AAAA,QAAQ,QAAR,wBAAQ,QAAR;AAAA,QAAkB,kBAAlB,wBAAkB,kBAAlB;;AACA,WAAO;AACL,MAAA,QAAQ,EAAR,QADK;AAEL,MAAA,UAAU,EAAV,UAFK;AAGL,MAAA,cAAc,EAAd,cAHK;AAIL,MAAA,UAAU,EAAV,UAJK;AAKL,MAAA,IAAI,EAAJ,IALK;AAML,MAAA,MAAM,EAAN,MANK;AAOL,MAAA,kBAAiB,EAAjB;AAPK,KAAP;AASF;AAjBa,CAAf","sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <div class=\"category\">\r\n      <div :class=\"{'category__item': true, 'category__item--active':currentTab === item.tab}\"\r\n           v-for=\"item in categories\"\r\n           :key=\"item.name\"\r\n           @click=\"() => handleTabClick(item.tab)\">{{item.name}}</div>\r\n    </div>\r\n    <div class=\"product\">\r\n      <div class=\"product__item\"\r\n           v-for=\"item in list\"\r\n           :key=\"item._id\">\r\n        <img :src=\"item.imgUrl\"\r\n             alt=\"\"\r\n             class=\"product__item__img\">\r\n        <div class=\"product__item__details\">\r\n          <h4 class=\"product__item__title\">{{item.name}}</h4>\r\n          <p class=\"product__item__sales\">月售{{item.sales}}件</p>\r\n          <p class=\"product__item__price\">\r\n            <span class=\"product__item__yen\">&yen;</span>{{item.price}}\r\n            <span class=\"product__item__origin\">&yen;{{item.oldPrice}}</span>\r\n          </p>\r\n        </div>\r\n        <div class=\"product__number\">\r\n          <span class=\"product__number__minus\"\r\n                @click=\"() => { changeCartItemInfo(shopId, item._id, item, -1)}\">-</span>\r\n          {{cartList?.[shopId]?.[item._id]?.count || 0}}\r\n          <span class=\"product__number__plus\"\r\n                @click=\"() => { changeCartItemInfo(shopId, item._id, item, 1)}\">+</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, toRefs, watchEffect } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport { get } from '@/utils/request.js'\r\nimport { useCommonCartEffect } from '@/views/shop/commonCartEffect.js'\r\n\r\nconst categories = [\r\n  { name: '全部商品', tab: 'all' },\r\n  { name: '秒杀', tab: 'seckill' },\r\n  { name: '新鲜水果', tab: 'fruit' }]\r\n\r\n// Tab 切换相关逻辑\r\nconst useTabEffect = () => {\r\n  const currentTab = ref(categories[0].tab)\r\n  const handleTabClick = (tab) => {\r\n    currentTab.value = tab\r\n  }\r\n  return { currentTab, handleTabClick }\r\n}\r\n\r\n// 获取列表内容相关逻辑\r\nconst useCurrentListEffect = (currentTab, shopId) => {\r\n  const content = reactive({ list: [] })\r\n  const getContentData = async () => {\r\n    const result = await get(`/api/shop/${shopId}/products`, { tab: currentTab.value })\r\n    if (result.errno === 0 && result.data.length) {\r\n      content.list = result.data\r\n    }\r\n  }\r\n  watchEffect(() => {\r\n    getContentData()\r\n  })\r\n  const { list } = toRefs(content)\r\n  return { list }\r\n}\r\n\r\nexport default {\r\n  name: 'content',\r\n  setup () {\r\n    const route = useRoute()\r\n    const shopId = route.params.id\r\n    const { currentTab, handleTabClick } = useTabEffect()\r\n    const { list } = useCurrentListEffect(currentTab, shopId)\r\n    const { cartList, changeCartItemInfo } = useCommonCartEffect()\r\n    return {\r\n      cartList,\r\n      categories,\r\n      handleTabClick,\r\n      currentTab,\r\n      list,\r\n      shopId,\r\n      changeCartItemInfo\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/style/variables.scss\";\r\n@import \"@/style/mixins.scss\";\r\n.content {\r\n  display: flex;\r\n  position: absolute;\r\n  left: 0;\r\n  right: 0;\r\n  top: 1.5rem;\r\n  bottom: 0.5rem;\r\n  // background: red;\r\n}\r\n.category {\r\n  overflow-y: scroll;\r\n  height: 100%;\r\n  width: 0.76rem;\r\n  background: $search-bgColor;\r\n  &__item {\r\n    line-height: 0.4rem;\r\n    text-align: center;\r\n    font-size: 0.14rem;\r\n    color: $content-fontcolor;\r\n    &--active {\r\n      background: $bg-color;\r\n    }\r\n  }\r\n}\r\n.product {\r\n  overflow-y: scroll;\r\n  flex: 1;\r\n  &__item {\r\n    position: relative;\r\n    display: flex;\r\n    padding: 0.12rem 0;\r\n    margin: 0 0.16rem;\r\n    border-bottom: 0.01rem solid $content-bgcolor;\r\n    &__img {\r\n      width: 0.68rem;\r\n      height: 0.68rem;\r\n      margin-right: 0.16rem;\r\n    }\r\n    &__details {\r\n      overflow: hidden;\r\n    }\r\n    &__title {\r\n      margin: 0;\r\n      line-height: 0.2rem;\r\n      font-size: 0.12rem;\r\n      color: $content-fontcolor;\r\n      @include ellipsis;\r\n    }\r\n    &__sales {\r\n      margin: 0.06rem 0;\r\n      font-size: 0.12rem;\r\n      color: $content-fontcolor;\r\n    }\r\n    &__price {\r\n      margin: 0;\r\n      line-height: 0.2rem;\r\n      font-size: 0.14rem;\r\n      color: $hightlight-fontColor;\r\n    }\r\n    &__yen {\r\n      font-size: 0.12rem;\r\n    }\r\n    &__origin {\r\n      line-height: 0.2rem;\r\n      font-size: 0.12rem;\r\n      color: $light-fontColor;\r\n      text-decoration: line-through;\r\n    }\r\n    .product__number {\r\n      position: absolute;\r\n      right: 0;\r\n      bottom: 0.12rem;\r\n      &__minus,\r\n      &__plus {\r\n        display: inline-block;\r\n        width: 0.2rem;\r\n        height: 0.2rem;\r\n        line-height: 0.16rem;\r\n        border-radius: 50%;\r\n        font-size: 0.2rem;\r\n        text-align: center;\r\n      }\r\n      &__minus {\r\n        border: 0.01rem solid $medium-fontColor;\r\n        color: $medium-fontColor;\r\n        margin-right: 0.1rem;\r\n      }\r\n      &__plus {\r\n        background: $btn-bgColor;\r\n        color: $bg-color;\r\n        margin-left: 0.1rem;\r\n      }\r\n      &__num {\r\n        width: 0.17rem;\r\n        height: 0.16rem;\r\n        font-size: 0.14rem;\r\n        color: $content-fontcolor;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}